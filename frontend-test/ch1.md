# Chapter 1. 테스트 목적과 장애물

##. 1 이 책의 구성

### 1.1 다양한 테스트 방법

1. 함수 단위 테스트
    - 브라우저에서 작동하는 SPA(Single Page Application)도 Node.js에서 작동하는 BFF(Backend For Frontend)도 여러 합수의 조합으로 만들어진다.
    - 함수마다 단위 테스트를 작성하며, 신뢰할 수 있는 함수를 만들다 보면 코드에서 발생할 수 있는 문제를 빠르게 발견할 수 있다.
2. UI 컴포넌트와 단위 테스트
    - UI 컴포넌트는 모던 프론트엔드 개발의 핵심 요소
    - 단위 테스트를 통해 UI 컴포넌트를 테스트하는 방법을 살펴본다.
3. UI 컴포넌트와 통합 테스트
    - UI 컴포넌트는 데이터를 화면에 그리는 일 외에도 많은 일을 담당한다.
    - 통합 테스트를 통해 외부 요인을 포함한 테스트를 진행하는 방법도 살펴본다.
4. UI 컴포넌트와 시각적 회귀 테스트
    - CSS가 적용된 출력 결과를 검증하려면 시각적 회귀 테스트가 필요하다.
    - 시각적 회귀 테스트는 UI 컴포넌트 단위로 실행할 때 세밀한 검증이 가능하다.
5. E2E 테스트
    - 헤드리스 브라우저로 E2E 테스트를 하면 실제 애플리케이션에 가까운 테스트가 가능하다.
    - 브라우저 API를 사용하거나 화면 간 테스트가 필요할 때 적합하다.
    - 실제 애플리케이션에 가깝게 상황을 재현하기 때문에 광범위한 테스트를 실시한다.

### 1.2 라이브러리와 도구

1. 타입스크립트
2. 프런트엔드 라이브러리 및 프레임워크
    - 리액트, Zod, React Hook Form, Next.js, 프리즈마 등
3. 테스트 프레임워크 및 도구
    - Jest: 명령줄 인터페이스 기반 테스트 프레임워크 및 테스트 러너
    - 플레이라이트: 헤드리스 브라우저를 포함한 테스트 프레임워크 및 테스트 러너
    - reg-suit: 시각적 회귀 테스트 프레임워크
    - Storybook: UI 컴포넌트 탐색기

## 2 테스트를 작성해야 하는 이유

**테스트는 왜 필요한가?**

### 2.1 사업의 신뢰성

- 버그는 서비스 이미지를 추락시킨다
    - 사용자가 가장 먼저 경험하게 되는 프론트엔드에서 테스트를 하지 않는 다는 것은 참 아이러니 한 것 같기도..?
    - 어플리케이션의 짧은 주기..?
- 모던 프론트엔드 개발에서는 BFF(Backend for frontend)개발에 프론트엔드 개발자가 참여하는 경우가 많아졌다. (인증, 인가)
    - 이러한 핵심 기능에서 사전에 버그를 발견할 수 있다.

### 2.2 높은 유지보수성

- 개발을 진행하다 보면 코드를 반복적으로 작성해야 하는 상황이 자주 있다.
    - 공통 모듈을 만드는 **리팩터링**이 필요
- 테스트 코드가 있다면 적극적으로 **리팩터링**을 진행할 수 있다.

### 2.3 코드 품질 향상

- 테스트 코드는 구현 코드의 품질을 되돌아보도록 한다
    - 테스트 코드 작성이 어렵다면 해당 코드가 너무 많은 역할을 한다는 신호일 수 있다
- 테스트 코드는 웹 접근성을 높이는 데에도 기여한다.
    - 웹 접근성: 신체적, 정신적 특성에 따른 차이 없이 동등하게 정보에 접근할 수 있어야 한다는 개념

### 2.4 원활한 협업

- 팀 단위 개발에서는 다른 개발자에 대한 배려가 필요하다
    - 테스트 코드는 글로 작성된 문서보다 우수한 사양서다
- 어떤 기능을 제공하고, 어떤 방식으로 작동하는지 파악할 수 있다.
- 사양서대로 구현됐는지 테스트 코드로 확인할 수 있다
    - 리뷰어의 부담이 줄어든다.
- 여기에 CI를 통과한 후 리뷰를 요청하는 규칙이 있다면, 리뷰와 수정 시간을 줄일 수 있다 → 협업이 원활!

### 2.5 회귀 테스트 줄이기

- 리팩터링할 때 회귀 테스트를 줄이고자 테스트 코드를 작성하기도 한다.
    - 테스트 자동화는 회귀 테스트를 줄이는 최적의 방법!

## 3 테스트 작성의 장벽

- **테스트틀 작성하는 습관이 없어서 어떻게 시작해야 할지 모르겠다.**
- **테스트를 작성할 시간에 기능을 추가하고 싶다.**
- **팀원들의 기술력이 부족해 유지할 자신이 없다.**

### 3.1 어려운 테스트 방법

- 공식 문서를 보는 경우가 많지.. 하지만 그대로 구현하는 것이 어렵게 느껴질 때도..
- 실제로 작성된 코드를 보는 것이 높은 학습 효과!

### 3.2 테스트 작성 시간의 부족

- 시간이 없을 수 있다
- 단기적으로 개발 속도가 느려질 가능성이 있다
- 충분한 시간을 확보하려면 테스트 코드가 필요성에 모두 동의를 해야한다
- **결국 습관적으로 작성해둔 테스트 코드가 빠른 속도로 프로젝트를 재구축 할 수 있게 한다**

### 3.3 테스트를 작성하면 시간이 절약되는 이유

- 장기적인 관점에서 보면 결국 시간이 절약된다
- 자동화된 테스트 코드의 유무라는 차이점

### 3.4 팀원들을 설득하는 방법

- 다음부터 테스트를 작성하자 는 접근법은 성공하기 어렵다
- 팀에 테스트 코드를 작성하는 문화를 정착시킬 수 있는지 없는지는 **초기 단계에서 결정된다**
    - 팀원을 설득하려면 참고할 수 있는 테스트 코드가 있어야 한다

### 후기

"입으로는 테스트 코드를 외치면서도 속으로는 번거로움을 되뇌던 나의 모습을 떠올리게 하는 장이었습니다.”